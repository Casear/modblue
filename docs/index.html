<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>@modum-io/modblue - v7.0.3</title>
	<meta name="description" content="Documentation for @modum-io/modblue - v7.0.3">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
	<script async src="assets/js/search.js" id="search-script"></script>
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.json" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">@modum-io/modblue - v7.0.3</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<h1>@modum-io/modblue - v7.0.3</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<a href="#modblue" id="modblue" style="color: inherit; text-decoration: none;">
					<h1>ModBlue</h1>
				</a>
				<p>Trying to make the world better place by improving the bluetooth experience one library at a time.</p>
				<a href="#getting-started" id="getting-started" style="color: inherit; text-decoration: none;">
					<h2>Getting started</h2>
				</a>
				<a href="#prerequisites" id="prerequisites" style="color: inherit; text-decoration: none;">
					<h3>Prerequisites</h3>
				</a>
				<a href="#os-x" id="os-x" style="color: inherit; text-decoration: none;">
					<h4>OS X</h4>
				</a>
				<ul>
					<li>Install <a href="https://apps.apple.com/ca/app/xcode/id497799835">XCode</a></li>
				</ul>
				<a href="#linux" id="linux" style="color: inherit; text-decoration: none;">
					<h4>Linux</h4>
				</a>
				<ul>
					<li><p>Give <code>net_cap_raw</code> to <code>node</code></p>
						<blockquote>
							<p>**This command may not work if you&#39;re using <a href="https://github.com/nvm-sh/nvm">NVM</a> or <a href="https://github.com/asdf-vm/asdf">asdf</a>!  </p>
							<pre><code><span style="color: #001080">Make</span><span style="color: #000000"> </span><span style="color: #001080">sure</span><span style="color: #000000"> </span><span style="color: #001080">to</span><span style="color: #000000"> </span><span style="color: #001080">give</span><span style="color: #000000"> </span><span style="color: #001080">the</span><span style="color: #000000"> </span><span style="color: #001080">actual</span><span style="color: #000000"> </span><span style="color: #001080">node</span><span style="color: #000000"> </span><span style="color: #001080">binary</span><span style="color: #000000"> </span><span style="color: #001080">the</span><span style="color: #000000"> </span><span style="color: #001080">permission</span><span style="color: #000000">**</span>
</code></pre>
						</blockquote>
						<pre><code class="language-bash"><span style="color: #000000">sudo setcap cap_net_raw+eip </span><span style="color: #A31515">$(eval readlink -f $(which node))</span>
</code></pre>
					</li>
					<li><p>Stop/Disable the bluetooth service if you&#39;re planning to <strong>advertise</strong> with the <code>hci</code> bindings:</p>
						<blockquote>
							<p><strong>Please note that this stops the <code>dbus</code> bindings from working properly!</strong></p>
						</blockquote>
						<pre><code class="language-bash"><span style="color: #000000">sudo systemctl stop bluetooth</span>
</code></pre>
						<p> You can also disable it permanently:</p>
						<pre><code class="language-bash"><span style="color: #000000">sudo systemctl disable bluetooth</span>
</code></pre>
					</li>
				</ul>
				<a href="#debian-flavours" id="debian-flavours" style="color: inherit; text-decoration: none;">
					<h5>Debian flavours</h5>
				</a>
				<ul>
					<li><pre><code class="language-bash"><span style="color: #000000"> sudo apt-get install bluetooth bluez libbluetooth-dev libudev-dev</span>
</code></pre>
					</li>
				</ul>
				<a href="#fedora-and-other-rpm-based-distros" id="fedora-and-other-rpm-based-distros" style="color: inherit; text-decoration: none;">
					<h5>Fedora and other RPM-based distros</h5>
				</a>
				<ul>
					<li><pre><code class="language-bash"><span style="color: #000000"> sudo yum install bluez bluez-libs bluez-libs-devel</span>
</code></pre>
					</li>
				</ul>
				<a href="#installation" id="installation" style="color: inherit; text-decoration: none;">
					<h3>Installation</h3>
				</a>
				<p>Install the module from npm:</p>
				<pre><code class="language-bash"><span style="color: #000000">npm i -E @modum-io/modblue</span>
</code></pre>
				<p>Then install the peer depencies depending on which one(s) you want to use:  </p>
				<ul>
					<li><p><code>hci</code> (using <a href="https://github.com/abandonware/node-bluetooth-hci-socket">bluetooth-hci-socket</a>)</p>
						<pre><code class="language-bash"><span style="color: #000000">npm i -E @abandonware/bluetooth-hci-socket</span>
</code></pre>
					</li>
					<li><p><code>dbus</code> (using <a href="https://github.com/dbusjs/node-dbus-next">dbus-next</a>)</p>
						<pre><code class="language-bash"><span style="color: #000000">npm i -E dbus-next</span>
</code></pre>
					</li>
				</ul>
				<a href="#usage" id="usage" style="color: inherit; text-decoration: none;">
					<h3>Usage</h3>
				</a>
				<p>Create a new <code>MODblue</code> object to get started (all bindings have the same interface)</p>
				<pre><code class="language-ts"><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">HciMODblue</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;@modum-io/modblue/hci&#039;</span><span style="color: #000000">; </span><span style="color: #008000">// for hci bindings</span>
<span style="color: #008000">// import { DbusMODblue } from &#039;@modum-io/modblue/dbus&#039;; // for dbus bindings</span>

<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">modblue</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">HciMODblue</span><span style="color: #000000">();    </span><span style="color: #008000">// or: new DbusMODblue()</span>
</code></pre>
				<p>Now you can scan &amp; use one or multiple of the adapters:</p>
				<pre><code class="language-ts"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">adapters</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">modblue</span><span style="color: #000000">.</span><span style="color: #795E26">getAdapters</span><span style="color: #000000">();</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">adapter</span><span style="color: #000000"> = </span><span style="color: #001080">adapters</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">];</span>
</code></pre>
				<a href="#scanning" id="scanning" style="color: inherit; text-decoration: none;">
					<h3>Scanning</h3>
				</a>
				<p>Use an adapter to scan for devices in proximity:</p>
				<pre><code class="language-ts"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">serviceUUIDs</span><span style="color: #000000">: </span><span style="color: #267F99">string</span><span style="color: #000000">[] = [];        </span><span style="color: #008000">// Optional: Advertised service UUIDs, without dashes (-)</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">allowDuplicates</span><span style="color: #000000">: </span><span style="color: #267F99">boolean</span><span style="color: #000000"> = </span><span style="color: #0000FF">true</span><span style="color: #000000">;    </span><span style="color: #008000">// Optional: Allow duplicate &#039;discover&#039; events for the same device</span>

<span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">adapter</span><span style="color: #000000">.</span><span style="color: #795E26">startScanning</span><span style="color: #000000">(</span><span style="color: #001080">serviceUUIDs</span><span style="color: #000000">, </span><span style="color: #001080">allowDuplicates</span><span style="color: #000000">);</span>
</code></pre>
				<p>Now you can either wait for a few seconds to scan and then get all the scanned peripherals</p>
				<pre><code class="language-ts"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">peripherals</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">adapter</span><span style="color: #000000">.</span><span style="color: #795E26">getScannedPeripherals</span><span style="color: #000000">();</span>
</code></pre>
				<p>or you can attach an event to trigger each time a new peripheral is discovered (or more often if <code>allowDuplicates</code> is <code>true</code>):</p>
				<pre><code class="language-ts"><span style="color: #001080">adapter</span><span style="color: #000000">.</span><span style="color: #795E26">on</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;discover&#039;</span><span style="color: #000000">, (</span><span style="color: #001080">peripheral</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;Discovered&#039;</span><span style="color: #000000">, </span><span style="color: #001080">peripheral</span><span style="color: #000000">.</span><span style="color: #001080">address</span><span style="color: #000000">));</span>
</code></pre>
				<p>Once discovered you can connect to a peripheral and grab it&#39;s GATT to discover services and characteristics:</p>
				<pre><code class="language-ts"><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">peripheral</span><span style="color: #000000">.</span><span style="color: #795E26">connect</span><span style="color: #000000">();</span>

<span style="color: #008000">// Setup GATT</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">requestMtu</span><span style="color: #000000"> = </span><span style="color: #098658">517</span><span style="color: #000000">;    </span><span style="color: #008000">// Optional: Request a specific MTU</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">gatt</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">peripheral</span><span style="color: #000000">.</span><span style="color: #795E26">setupGatt</span><span style="color: #000000">(</span><span style="color: #001080">requestMtu</span><span style="color: #000000">);</span>

<span style="color: #008000">// Discover services</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">services</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">gatt</span><span style="color: #000000">.</span><span style="color: #795E26">discoverServices</span><span style="color: #000000">();</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">service</span><span style="color: #000000"> = </span><span style="color: #001080">services</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">];</span>

<span style="color: #008000">// Discover characteristics</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">characteristics</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">service</span><span style="color: #000000">.</span><span style="color: #795E26">discoverCharacteristics</span><span style="color: #000000">();</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">characteristic</span><span style="color: #000000"> = </span><span style="color: #001080">characteristics</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">];</span>

<span style="color: #008000">// Discover descriptors</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">descriptors</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">characteristic</span><span style="color: #000000">.</span><span style="color: #795E26">discoverDescriptors</span><span style="color: #000000">();</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">descriptor</span><span style="color: #000000"> = </span><span style="color: #001080">descriptors</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">];</span>

<span style="color: #008000">// Read value</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">buffer</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">characteristic</span><span style="color: #000000">.</span><span style="color: #795E26">read</span><span style="color: #000000">();</span>
<span style="color: #008000">// or</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">buffer</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">descriptor</span><span style="color: #000000">.</span><span style="color: #795E26">readValue</span><span style="color: #000000">();</span>

<span style="color: #008000">// Write value</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">withoutResponse</span><span style="color: #000000">: </span><span style="color: #267F99">boolean</span><span style="color: #000000"> = </span><span style="color: #0000FF">true</span><span style="color: #000000">;    </span><span style="color: #008000">// Tell the peripheral we don&#039;t need a response for this write</span>

<span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">characteristic</span><span style="color: #000000">.</span><span style="color: #795E26">write</span><span style="color: #000000">(</span><span style="color: #001080">buffer</span><span style="color: #000000">, </span><span style="color: #001080">withoutResponse</span><span style="color: #000000">);</span>
<span style="color: #008000">// or</span>
<span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">descriptor</span><span style="color: #000000">.</span><span style="color: #795E26">writeValue</span><span style="color: #000000">(</span><span style="color: #001080">buffer</span><span style="color: #000000">);</span>
</code></pre>
				<a href="#advertising" id="advertising" style="color: inherit; text-decoration: none;">
					<h3>Advertising</h3>
				</a>
				<p>First you have to setup the local GATT and the services and characteristics you want to advertise:</p>
				<pre><code class="language-ts"><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">GattServiceInput</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;@modum-io/modblue&#039;</span><span style="color: #000000">;</span>

<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">maxMtu</span><span style="color: #000000">: </span><span style="color: #267F99">number</span><span style="color: #000000"> = </span><span style="color: #098658">517</span><span style="color: #000000">;                             </span><span style="color: #008000">// Optional: Specify the maximum MTU that should be negotiated with connecting devices.</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">gatt</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">adapter</span><span style="color: #000000">.</span><span style="color: #795E26">setupGatt</span><span style="color: #000000">(</span><span style="color: #001080">maxMtu</span><span style="color: #000000">);           </span><span style="color: #008000">// Setup our local GATT server</span>

<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">deviceName</span><span style="color: #000000">: </span><span style="color: #267F99">string</span><span style="color: #000000"> = </span><span style="color: #A31515">&#039;MODblue Testing&#039;</span><span style="color: #000000">;</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">services</span><span style="color: #000000">: </span><span style="color: #267F99">GattServiceInput</span><span style="color: #000000">[] = [</span>
<span style="color: #000000">   {</span>
<span style="color: #000000">      </span><span style="color: #001080">uuid:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;48ee0000bf49460ca3d77ec7a512a4ce&#039;</span><span style="color: #000000">,          </span><span style="color: #008000">// UUID of the service (without dashes [-])</span>
<span style="color: #000000">      </span><span style="color: #001080">characteristics:</span><span style="color: #000000"> [</span>
<span style="color: #000000">         {</span>
<span style="color: #000000">            </span><span style="color: #001080">uuid:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;48ee0001bf49460ca3d77ec7a512a4ce&#039;</span><span style="color: #000000">,    </span><span style="color: #008000">// UUID of the characteristic</span>
<span style="color: #000000">            </span><span style="color: #001080">properties:</span><span style="color: #000000"> [</span><span style="color: #A31515">&#039;read&#039;</span><span style="color: #000000">],                        </span><span style="color: #008000">// Supported properties on the characteristic</span>
<span style="color: #000000">            </span><span style="color: #001080">secure:</span><span style="color: #000000"> [],                                  </span><span style="color: #008000">// Which of the supported properties are secured</span>
<span style="color: #000000">            </span><span style="color: #001080">descriptors:</span><span style="color: #000000"> [],                             </span><span style="color: #008000">// Descriptors on this characteristic</span>
<span style="color: #000000">            </span><span style="color: #001080">value:</span><span style="color: #000000"> </span><span style="color: #001080">Buffer</span><span style="color: #000000">.</span><span style="color: #795E26">from</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;test&#039;</span><span style="color: #000000">, </span><span style="color: #A31515">&#039;utf-8&#039;</span><span style="color: #000000">)          </span><span style="color: #008000">// The (constant) data that is returned for this characteristic</span>
<span style="color: #000000">         },</span>
<span style="color: #000000">      {</span>
<span style="color: #000000">         </span><span style="color: #001080">uuid:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;48ee0002bf49460ca3d77ec7a512a4ce&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">         </span><span style="color: #001080">properties:</span><span style="color: #000000"> [</span><span style="color: #A31515">&#039;read&#039;</span><span style="color: #000000">],</span>
<span style="color: #000000">         </span><span style="color: #001080">secure:</span><span style="color: #000000"> [],</span>
<span style="color: #000000">         </span><span style="color: #001080">descriptors:</span><span style="color: #000000"> [],</span>
<span style="color: #000000">         </span><span style="color: #795E26">onRead</span><span style="color: #001080">:</span><span style="color: #000000"> </span><span style="color: #0000FF">async</span><span style="color: #000000"> (</span><span style="color: #001080">offset</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span>
<span style="color: #000000">            </span><span style="color: #008000">// This function receives the offset at which to start reading</span>
<span style="color: #000000">            </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">offset</span><span style="color: #000000"> === </span><span style="color: #098658">0</span><span style="color: #000000">) {</span>
<span style="color: #000000">               </span><span style="color: #008000">// Only do your computation when the first bytes are requested.</span>
<span style="color: #000000">               </span><span style="color: #008000">// In case of subsequent reads (because of long data / small MTU) we want to return the same data as before, starting at the offset</span>
<span style="color: #000000">               }</span>

<span style="color: #000000">               </span><span style="color: #008000">// Returns a tuple containing: [error: number, data: Buffer] - Use 0 for the error on success.</span>
<span style="color: #000000">               </span><span style="color: #AF00DB">return</span><span style="color: #000000"> [</span><span style="color: #098658">0</span><span style="color: #000000">, </span><span style="color: #001080">Buffer</span><span style="color: #000000">.</span><span style="color: #795E26">from</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;other&#039;</span><span style="color: #000000">, </span><span style="color: #A31515">&#039;utf-8&#039;</span><span style="color: #000000">).</span><span style="color: #795E26">slice</span><span style="color: #000000">(</span><span style="color: #001080">offset</span><span style="color: #000000">)];</span>
<span style="color: #000000">            }</span>
<span style="color: #000000">         },</span>
<span style="color: #000000">         {</span>
<span style="color: #000000">            </span><span style="color: #001080">uuid:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;48ee0003bf49460ca3d77ec7a512a4cd&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">            </span><span style="color: #001080">properties:</span><span style="color: #000000"> [</span><span style="color: #A31515">&#039;write&#039;</span><span style="color: #000000">, </span><span style="color: #A31515">&#039;write-without-response&#039;</span><span style="color: #000000">],</span>
<span style="color: #000000">            </span><span style="color: #001080">secure:</span><span style="color: #000000"> [],</span>
<span style="color: #000000">            </span><span style="color: #001080">descriptors:</span><span style="color: #000000"> [],</span>
<span style="color: #000000">            </span><span style="color: #795E26">onWrite</span><span style="color: #001080">:</span><span style="color: #000000"> (</span><span style="color: #001080">offset</span><span style="color: #000000">, </span><span style="color: #001080">data</span><span style="color: #000000">, </span><span style="color: #001080">withoutResponse</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span>
<span style="color: #000000">               </span><span style="color: #008000">// This function handles writing data to the characteristic</span>
<span style="color: #000000">               </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;writing&#039;</span><span style="color: #000000">, </span><span style="color: #001080">offset</span><span style="color: #000000">, </span><span style="color: #001080">data</span><span style="color: #000000">, </span><span style="color: #001080">withoutResponse</span><span style="color: #000000">);</span>
<span style="color: #000000">            }</span>
<span style="color: #000000">         }</span>
<span style="color: #000000">      ]</span>
<span style="color: #000000">   }</span>
<span style="color: #000000">];</span>
<span style="color: #001080">gatt</span><span style="color: #000000">.</span><span style="color: #795E26">setData</span><span style="color: #000000">(</span><span style="color: #001080">deviceName</span><span style="color: #000000">, </span><span style="color: #001080">services</span><span style="color: #000000">);</span>
</code></pre>
				<p>To advertise services and characteristics use:</p>
				<pre><code class="language-ts"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">deviceName</span><span style="color: #000000">: </span><span style="color: #267F99">string</span><span style="color: #000000"> = </span><span style="color: #A31515">&#039;MODblue Testing&#039;</span><span style="color: #000000">;    </span><span style="color: #008000">// You can use a different advertising name then the name in the GATT</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">advertisedServiceUUIDs</span><span style="color: #000000">: </span><span style="color: #267F99">string</span><span style="color: #000000">[] = [];     </span><span style="color: #008000">// Optional: Advertise specific service UUIDs (without dashes [-])</span>

<span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">adapter</span><span style="color: #000000">.</span><span style="color: #795E26">startAdvertising</span><span style="color: #000000">(</span><span style="color: #001080">deviceName</span><span style="color: #000000">, </span><span style="color: #001080">advertisedServiceUUIDs</span><span style="color: #000000">);</span>
</code></pre>
				<a href="#tests" id="tests" style="color: inherit; text-decoration: none;">
					<h2>Tests</h2>
				</a>
				<a href="#adapters" id="adapters" style="color: inherit; text-decoration: none;">
					<h3>Adapters</h3>
				</a>
				<p>This test will list all available adapters for all available bindings.</p>
				<ol>
					<li><p>Run test using</p>
						<pre><code class="language-bash"><span style="color: #000000">node tests/adapters.js</span>
</code></pre>
					</li>
				</ol>
				<a href="#connect" id="connect" style="color: inherit; text-decoration: none;">
					<h3>Connect</h3>
				</a>
				<p>This test will connect, discover services and characteristics, read a single characteristic value and disconnect.
				The test runs indefinitely and rotates between all specified devices.</p>
				<ol>
					<li><p>Run test using</p>
						<pre><code class="language-bash"><span style="color: #0000FF">export</span><span style="color: #000000"> BINDINGS=</span><span style="color: #A31515">&quot;hci&quot;</span><span style="color: #000000">;</span>
<span style="color: #0000FF">export</span><span style="color: #000000"> LOGGER_IDS=</span><span style="color: #A31515">&quot;AA:AA:AA:AA:AA:AA|BB:BB:BB:BB:BB:BB&quot;</span><span style="color: #000000">;</span>
<span style="color: #0000FF">export</span><span style="color: #000000"> SERVICE_ID=</span><span style="color: #A31515">&quot;48ee0000bf49460ca3d77ec7a512a4cd&quot;</span><span style="color: #000000">;</span>
<span style="color: #0000FF">export</span><span style="color: #000000"> CHARACTERISTIC_ID = </span><span style="color: #A31515">&quot;48ee000bbf49460ca3d77ec7a512a4cd&quot;</span><span style="color: #000000">;</span>
<span style="color: #000000">node tests/connect.js </span><span style="color: #001080">$BINDINGS</span><span style="color: #000000"> </span><span style="color: #001080">$LOGGER_IDS</span><span style="color: #000000"> </span><span style="color: #001080">$SERVICE_ID</span><span style="color: #000000"> </span><span style="color: #001080">$CHARACTERISTIC_ID</span>
</code></pre>
					</li>
				</ol>
				<a href="#advertise" id="advertise" style="color: inherit; text-decoration: none;">
					<h3>Advertise</h3>
				</a>
				<p>This test will advertise some services and characteristics under a specified name.
				The test runs indefinitely and waits for connections.</p>
				<ol>
					<li><p>Run test using</p>
						<pre><code class="language-bash"><span style="color: #0000FF">export</span><span style="color: #000000"> BINDINGS=</span><span style="color: #A31515">&quot;hci&quot;</span><span style="color: #000000">;</span>
<span style="color: #0000FF">export</span><span style="color: #000000"> ADVERTISE_NAME=</span><span style="color: #A31515">&quot;MODblue Testing&quot;</span><span style="color: #000000">;</span>
<span style="color: #000000">node tests/advertise.js </span><span style="color: #001080">$BINDINGS</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;</span><span style="color: #001080">$ADVERTISE_NAME</span><span style="color: #A31515">&quot;</span>
</code></pre>
					</li>
				</ol>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class=" ">
						<a href="modules.html">Exports</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
					<li class=" tsd-kind-class">
						<a href="classes/adapter.html" class="tsd-kind-icon">Adapter</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/gatt.html" class="tsd-kind-icon">Gatt</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/gattcharacteristic.html" class="tsd-kind-icon">Gatt<wbr>Characteristic</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/gattcharacteristiclocal.html" class="tsd-kind-icon">Gatt<wbr>Characteristic<wbr>Local</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/gattcharacteristicremote.html" class="tsd-kind-icon">Gatt<wbr>Characteristic<wbr>Remote</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/gattdescriptor.html" class="tsd-kind-icon">Gatt<wbr>Descriptor</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/gattdescriptorlocal.html" class="tsd-kind-icon">Gatt<wbr>Descriptor<wbr>Local</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/gattdescriptorremote.html" class="tsd-kind-icon">Gatt<wbr>Descriptor<wbr>Remote</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/gatterror.html" class="tsd-kind-icon">Gatt<wbr>Error</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/gattlocal.html" class="tsd-kind-icon">Gatt<wbr>Local</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/gattremote.html" class="tsd-kind-icon">Gatt<wbr>Remote</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/gattservice.html" class="tsd-kind-icon">Gatt<wbr>Service</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/gattservicelocal.html" class="tsd-kind-icon">Gatt<wbr>Service<wbr>Local</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/gattserviceremote.html" class="tsd-kind-icon">Gatt<wbr>Service<wbr>Remote</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/modblue.html" class="tsd-kind-icon">MODblue</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/peripheral.html" class="tsd-kind-icon">Peripheral</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/gattcharacteristicinput.html" class="tsd-kind-icon">Gatt<wbr>Characteristic<wbr>Input</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/gattdescriptorinput.html" class="tsd-kind-icon">Gatt<wbr>Descriptor<wbr>Input</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/gattserviceinput.html" class="tsd-kind-icon">Gatt<wbr>Service<wbr>Input</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="modules.html#addresstype" class="tsd-kind-icon">Address<wbr>Type</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="modules.html#gattcharacteristicproperty" class="tsd-kind-icon">Gatt<wbr>Characteristic<wbr>Property</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="modules.html#peripheralstate" class="tsd-kind-icon">Peripheral<wbr>State</a>
					</li>
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
</body>
</html>